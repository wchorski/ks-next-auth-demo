"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{4043:function(e,t,a){a.d(t,{BU:function(){return withReact},F3:function(){return _},_7:function(){return useSlateStatic}}),a(7200),a(8143),a(7269);var r=a(2265),n=a(7911);a(8796);var o=a(2160),i=a(4887),s=(0,r.createContext)(null),useSlateStatic=()=>{var e=(0,r.useContext)(s);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},d=parseInt(r.version.split(".")[0],10);"undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream;var l="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),f="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),u=("undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),"undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent)),h="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),p=c&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent);"undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),"undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),"undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent);var v=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement);g&&p||u||"undefined"==typeof globalThis||!globalThis.InputEvent||globalThis.InputEvent.prototype.getTargetRanges;var m=new WeakMap,w=new WeakMap,M=new WeakMap,b=new WeakMap,D=(new WeakMap,new WeakMap),y=(new WeakMap,new WeakMap),O=new WeakMap,x=new WeakMap,k=new WeakMap,C=new WeakMap,E=new WeakMap,S=new WeakMap,N=new WeakMap,R=new WeakMap,L=new WeakMap,F=new WeakMap,P=new WeakMap,A=new WeakMap;new WeakMap,Symbol("placeholder"),Symbol("mark-placeholder");var W=globalThis.Text,getDefaultView=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,isDOMComment=e=>isDOMNode(e)&&8===e.nodeType,isDOMElement=e=>isDOMNode(e)&&1===e.nodeType,isDOMNode=e=>{var t=getDefaultView(e);return!!t&&e instanceof t.Node},isDOMSelection=e=>{var t=e&&e.anchorNode&&getDefaultView(e.anchorNode);return!!t&&e instanceof t.Selection},isDOMText=e=>isDOMNode(e)&&3===e.nodeType,normalizeDOMPoint=e=>{var[t,a]=e;if(isDOMElement(t)&&t.childNodes.length){var r=a===t.childNodes.length,n=r?a-1:a;for([t,n]=getEditableChildAndIndex(t,n,r?"backward":"forward"),r=n<a;isDOMElement(t)&&t.childNodes.length;){var o=r?t.childNodes.length-1:0;t=getEditableChild(t,o,r?"backward":"forward")}a=r&&null!=t.textContent?t.textContent.length:0}return[t,a]},hasShadowRoot=e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},getEditableChildAndIndex=(e,t,a)=>{for(var{childNodes:r}=e,n=r[t],o=t,i=!1,s=!1;(isDOMComment(n)||isDOMElement(n)&&0===n.childNodes.length||isDOMElement(n)&&"false"===n.getAttribute("contenteditable"))&&(!i||!s);){if(o>=r.length){i=!0,o=t-1,a="backward";continue}if(o<0){s=!0,o=t+1,a="forward";continue}n=r[o],t=o,o+="forward"===a?1:-1}return[n,t]},getEditableChild=(e,t,a)=>{var[r]=getEditableChildAndIndex(e,t,a);return r},getPlainText=e=>{var t="";if(isDOMText(e)&&e.nodeValue)return e.nodeValue;if(isDOMElement(e)){for(var a of Array.from(e.childNodes))t+=getPlainText(a);var r=getComputedStyle(e).getPropertyValue("display");("block"===r||"list"===r||"BR"===e.tagName)&&(t+="\n")}return t},B=/data-slate-fragment="(.+?)"/m,getSlateFragmentAttribute=e=>{var[,t]=e.getData("text/html").match(B)||[];return t},isTrackedMutation=(e,t,a)=>{var{target:r}=t;if(isDOMElement(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:n}=_.getWindow(e);if(n.contains(r))return _.hasDOMNode(e,r,{editable:!0});var o=a.find(e=>{var{addedNodes:t,removedNodes:a}=e;for(var n of t)if(n===r||n.contains(r))return!0;for(var o of a)if(o===r||o.contains(r))return!0});return!!o&&o!==t&&isTrackedMutation(e,o,a)},T=0;let Key=class Key{constructor(){this.id="".concat(T++)}};var _={androidPendingDiffs:e=>F.get(e),androidScheduleFlush:e=>{var t;null===(t=N.get(e))||void 0===t||t()},blur:e=>{var t=_.toDOMNode(e,e),a=_.findDocumentOrShadowRoot(e);k.set(e,!1),a.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,a=_.findDocumentOrShadowRoot(e).getSelection();a&&a.rangeCount>0&&a.removeAllRanges(),t&&n.YR.deselect(e)},findDocumentOrShadowRoot:e=>{var t=_.toDOMNode(e,e),a=t.getRootNode();return(a instanceof Document||a instanceof ShadowRoot)&&null!=a.getSelection?a:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var a,{clientX:r,clientY:o,target:i}=t;if(null==r||null==o)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var s=_.toSlateNode(e,t.target),d=_.findPath(e,s);if(n.W_.isElement(s)&&n.ML.isVoid(e,s)){var l=i.getBoundingClientRect(),c=e.isInline(s)?r-l.left<l.left+l.width-r:o-l.top<l.top+l.height-o,f=n.ML.point(e,d,{edge:c?"start":"end"}),u=c?n.ML.before(e,f):n.ML.after(e,f);if(u)return n.ML.range(e,u)}var{document:h}=_.getWindow(e);if(h.caretRangeFromPoint)a=h.caretRangeFromPoint(r,o);else{var g=h.caretPositionFromPoint(r,o);g&&((a=h.createRange()).setStart(g.offsetNode,g.offset),a.setEnd(g.offsetNode,g.offset))}if(!a)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return _.toSlateRange(e,a,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var a=y.get(t);return a||(a=new Key,y.set(t,a)),a},findPath:(e,t)=>{for(var a=[],r=t;;){var o=w.get(r);if(null==o){if(n.ML.isEditor(r))return a;break}var i=m.get(r);if(null==i)break;a.unshift(i),r=o}throw Error("Unable to find the path for Slate node: ".concat(n.o4.stringify(t)))},focus:e=>{var t=_.toDOMNode(e,e),a=_.findDocumentOrShadowRoot(e);k.set(e,!0),a.activeElement!==t&&t.focus({preventScroll:!0})},getWindow:e=>{var t=M.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:n=!1}=r,o=_.toDOMNode(e,e);try{a=isDOMElement(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!a&&a.closest("[data-slate-editor]")===o&&(!n||!!a.isContentEditable||"boolean"==typeof a.isContentEditable&&a.closest('[contenteditable="false"]')===o||!!a.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>isDOMNode(t)&&_.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:a,focus:r}=t;return n.ML.hasPath(e,a.path)&&n.ML.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>_.hasEditableTarget(e,t)||_.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>isDOMNode(t)&&_.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!C.get(e),isFocused:e=>!!k.get(e),isReadOnly:e=>!!x.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(x.get(e))return!1;var a=_.hasTarget(e,t)&&_.toSlateNode(e,t);return n.W_.isElement(a)&&n.ML.isVoid(e,a)},setFragmentData:(e,t,a)=>e.setFragmentData(t,a),toDOMNode:(e,t)=>{var a=O.get(e),r=n.ML.isEditor(t)?b.get(e):null==a?void 0:a.get(_.findKey(e,t));if(!r)throw Error("Cannot resolve a DOM node from Slate node: ".concat(n.o4.stringify(t)));return r},toDOMPoint:(e,t)=>{var[a]=n.ML.node(e,t.path),r=_.toDOMNode(e,a);n.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o=Array.from(r.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0,s=0;s<o.length;s++){var d=o[s],l=d.childNodes[0];if(null!=l&&null!=l.textContent){var{length:c}=l.textContent,f=d.getAttribute("data-slate-length"),u=i+(null==f?c:parseInt(f,10)),h=o[s+1];if(t.offset===u&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var g,p,v=h.childNodes[0];g=[v instanceof W?v:h,null!==(p=h.textContent)&&void 0!==p&&p.startsWith("\uFEFF")?1:0];break}if(t.offset<=u){g=[l,Math.min(c,Math.max(0,t.offset-i))];break}i=u}}if(!g)throw Error("Cannot resolve a DOM point from Slate point: ".concat(n.o4.stringify(t)));return g},toDOMRange:(e,t)=>{var{anchor:a,focus:r}=t,o=n.e6.isBackward(t),i=_.toDOMPoint(e,a),s=n.e6.isCollapsed(t)?i:_.toDOMPoint(e,r),d=_.getWindow(e).document.createRange(),[l,c]=o?s:i,[f,u]=o?i:s,h=!!(isDOMElement(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),g=!!(isDOMElement(f)?f:f.parentElement).getAttribute("data-slate-zero-width");return d.setStart(l,h?1:c),d.setEnd(f,g?1:u),d},toSlateNode:(e,t)=>{var a=isDOMElement(t)?t:t.parentElement;a&&!a.hasAttribute("data-slate-node")&&(a=a.closest("[data-slate-node]"));var r=a?D.get(a):null;if(!r)throw Error("Cannot resolve a Slate node from DOM node: ".concat(a));return r},toSlatePoint:(e,t,a)=>{var{exactMatch:r,suppressThrow:o}=a,[i,s]=r?t:normalizeDOMPoint(t),d=i.parentNode,l=null,u=0;if(d){var h,g,p=_.toDOMNode(e,e),v=d.closest('[data-slate-void="true"]'),m=v&&p.contains(v)?v:null,w=d.closest("[data-slate-leaf]"),M=null;if(w){if(l=w.closest('[data-slate-node="text"]')){var b=_.getWindow(e).document.createRange();b.setStart(l,0),b.setEnd(i,s);var D=b.cloneContents();[...Array.prototype.slice.call(D.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(D.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(c&&!r&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),u=D.textContent.length,M=l}}else if(m){for(var y=m.querySelectorAll("[data-slate-leaf]"),O=0;O<y.length;O++){var x=y[O];if(_.hasDOMNode(e,x)){w=x;break}}w?(l=w.closest('[data-slate-node="text"]'),u=(M=w).textContent.length,M.querySelectorAll("[data-slate-zero-width]").forEach(e=>{u-=e.textContent.length})):u=1}M&&u===M.textContent.length&&c&&"z"===M.getAttribute("data-slate-zero-width")&&null!==(h=M.textContent)&&void 0!==h&&h.startsWith("\uFEFF")&&(d.hasAttribute("data-slate-zero-width")||f&&null!==(g=M.textContent)&&void 0!==g&&g.endsWith("\n\n"))&&u--}if(c&&!l&&!r){var k=d.hasAttribute("data-slate-node")?d:d.closest("[data-slate-node]");if(k&&_.hasDOMNode(e,k,{editable:!0})){var C=_.toSlateNode(e,k),{path:E,offset:S}=n.ML.start(e,_.findPath(e,C));return k.querySelector("[data-slate-leaf]")||(S=s),{path:E,offset:S}}}if(!l){if(o)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var N=_.toSlateNode(e,l);return{path:_.findPath(e,N),offset:u}},toSlateRange:(e,t,a)=>{var r,o,i,s,d,l,{exactMatch:c,suppressThrow:u}=a;if((isDOMSelection(t)?t.anchorNode:t.startContainer)&&(isDOMSelection(t)?(r=t.anchorNode,o=t.anchorOffset,i=t.focusNode,s=t.focusOffset,d=h&&hasShadowRoot(r)?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(r=t.startContainer,o=t.startOffset,i=t.endContainer,s=t.endOffset,d=t.collapsed)),null==r||null==i||null==o||null==s)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in i&&"false"===i.getAttribute("contenteditable")&&"true"!==i.getAttribute("data-slate-void")&&(i=r,s=(null===(l=r.textContent)||void 0===l?void 0:l.length)||0);var g=_.toSlatePoint(e,[r,o],{exactMatch:c,suppressThrow:u});if(!g)return null;var p=d?g:_.toSlatePoint(e,[i,s],{exactMatch:c,suppressThrow:u});if(!p)return null;if(f&&!d&&r!==i){var v=n.ML.isEnd(e,g,g.path),m=n.ML.isStart(e,p,p.path);v&&(g=n.ML.after(e,g)||g),m&&(p=n.ML.before(e,p)||p)}var w={anchor:g,focus:p};return n.e6.isExpanded(w)&&n.e6.isForward(w)&&isDOMElement(i)&&n.ML.void(e,{at:w.focus,mode:"highest"})&&(w=n.ML.unhangRange(e,w,{voids:!0})),w}};function transformPendingPoint(e,t,a){var r=F.get(e),o=null==r?void 0:r.find(e=>{var{path:a}=e;return n.y$.equals(a,t.path)});if(!o||t.offset<=o.diff.start)return n.E9.transform(t,a,{affinity:"backward"});var{diff:i}=o;if(t.offset<=i.start+i.text.length){var s={path:t.path,offset:i.start},d=n.E9.transform(s,a,{affinity:"backward"});return d?{path:d.path,offset:d.offset+t.offset-i.start}:null}var l={path:t.path,offset:t.offset-i.text.length+i.end-i.start},c=n.E9.transform(l,a,{affinity:"backward"});return c?"split_node"===a.type&&n.y$.equals(a.path,t.path)&&l.offset<a.position&&i.start<a.position?c:{path:c.path,offset:c.offset+i.text.length-i.end+i.start}:null}function transformPendingRange(e,t,a){var r=transformPendingPoint(e,t.anchor,a);if(!r)return null;if(n.e6.isCollapsed(t))return{anchor:r,focus:r};var o=transformPendingPoint(e,t.focus,a);return o?{anchor:r,focus:o}:null}var z=v?r.useLayoutEffect:r.useEffect,j=null,$={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},I={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},q={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},create=e=>{var t=$[e],a=I[e],r=q[e],n=t&&(0,o.P6)(t),i=a&&(0,o.P6)(a),s=r&&(0,o.P6)(r);return e=>!!(n&&n(e)||l&&i&&i(e)||!l&&s&&s(e))};create("bold"),create("compose"),create("moveBackward"),create("moveForward"),create("deleteBackward"),create("deleteForward"),create("deleteLineBackward"),create("deleteLineForward"),create("deleteWordBackward"),create("deleteWordForward"),create("extendBackward"),create("extendForward"),create("extendLineBackward"),create("extendLineForward"),create("italic"),create("moveLineBackward"),create("moveLineForward"),create("moveWordBackward"),create("moveWordForward"),create("redo"),create("insertSoftBreak"),create("splitBlock"),create("transposeCharacter"),create("undo");var createRestoreDomManager=(e,t)=>{var a=[],clear=()=>{a=[]};return{registerMutations:r=>{if(t.current){var n=r.filter(t=>isTrackedMutation(e,t,r));a.push(...n)}},restoreDOM:function(){a.length>0&&(a.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),clear())},clear}},V={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};let RestoreDOMComponent=class RestoreDOMComponent extends r.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,V)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=createRestoreDomManager(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,a,r,n=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=n&&n.length&&(null===(r=this.manager)||void 0===r||r.registerMutations(n)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(a=this.manager)||void 0===a||a.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}};RestoreDOMComponent.contextType=s;var doRectsIntersect=(e,t)=>{var a=(t.top+t.bottom)/2;return e.top<=a&&e.bottom>=a},areRangesSameLine=(e,t,a)=>{var r=_.toDOMRange(e,t).getBoundingClientRect(),n=_.toDOMRange(e,a).getBoundingClientRect();return doRectsIntersect(r,n)&&doRectsIntersect(n,r)},findCurrentLineRange=(e,t)=>{var a=n.ML.range(e,n.e6.end(t)),r=Array.from(n.ML.positions(e,{at:t})),o=0,i=r.length,s=Math.floor(i/2);if(areRangesSameLine(e,n.ML.range(e,r[o]),a))return n.ML.range(e,r[o],a);if(r.length<2)return n.ML.range(e,r[r.length-1],a);for(;s!==r.length&&s!==o;)areRangesSameLine(e,n.ML.range(e,r[s]),a)?i=s:o=s,s=Math.floor((o+i)/2);return n.ML.range(e,r[i],a)};function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(a),!0).forEach(function(t){var r;r=a[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var withReact=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",{apply:a,onChange:r,deleteBackward:o,addMark:s,removeMark:l}=e;return O.set(e,new WeakMap),e.addMark=(t,a)=>{var r,n;null===(r=N.get(e))||void 0===r||r(),!R.get(e)&&null!==(n=F.get(e))&&void 0!==n&&n.length&&R.set(e,null),L.delete(e),s(t,a)},e.removeMark=t=>{var a;!R.get(e)&&null!==(a=F.get(e))&&void 0!==a&&a.length&&R.set(e,null),L.delete(e),l(t)},e.deleteBackward=t=>{if("line"!==t)return o(t);if(e.selection&&n.e6.isCollapsed(e.selection)){var a=n.ML.above(e,{match:t=>n.W_.isElement(t)&&n.ML.isBlock(e,t),at:e.selection});if(a){var[,r]=a,i=n.ML.range(e,r,e.selection.anchor),s=findCurrentLineRange(e,i);n.e6.isCollapsed(s)||n.YR.delete(e,{at:s})}}},e.apply=t=>{var r,o=[],i=F.get(e);if(null!=i&&i.length){var s=i.map(e=>(function(e,t){var{path:a,diff:r,id:o}=e;switch(t.type){case"insert_text":if(!n.y$.equals(t.path,a)||t.offset>=r.end)return e;if(t.offset<=r.start)return{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:o,path:a};return{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:o,path:a};case"remove_text":if(!n.y$.equals(t.path,a)||t.offset>=r.end)return e;if(t.offset+t.text.length<=r.start)return{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:o,path:a};return{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:o,path:a};case"split_node":if(!n.y$.equals(t.path,a)||t.position>=r.end)return{diff:r,id:o,path:n.y$.transform(a,t,{affinity:"backward"})};if(t.position>r.start)return{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:o,path:a};return{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:o,path:n.y$.transform(a,t,{affinity:"forward"})};case"merge_node":if(!n.y$.equals(t.path,a))return{diff:r,id:o,path:n.y$.transform(a,t)};return{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:o,path:n.y$.transform(a,t)}}var i=n.y$.transform(a,t);return i?{diff:r,path:i,id:o}:null})(e,t)).filter(Boolean);F.set(e,s)}var d=A.get(e);d&&A.set(e,transformPendingRange(e,d,t));var l=P.get(e);if(null!=l&&l.at){var c=n.E9.isPoint(null==l?void 0:l.at)?transformPendingPoint(e,l.at,t):transformPendingRange(e,l.at,t);P.set(e,c?_objectSpread(_objectSpread({},l),{},{at:c}):null)}switch(t.type){case"insert_text":case"remove_text":case"set_node":case"split_node":o.push(...getMatches(e,t.path));break;case"set_selection":null===(r=E.get(e))||void 0===r||r.unref(),E.delete(e);break;case"insert_node":case"remove_node":o.push(...getMatches(e,n.y$.parent(t.path)));break;case"merge_node":o.push(...getMatches(e,n.y$.previous(t.path)));break;case"move_node":o.push(...getMatches(e,n.y$.common(n.y$.parent(t.path),n.y$.parent(t.newPath))))}for(var[f,u]of(a(t),o)){var[h]=n.ML.node(e,f);y.set(h,u)}},e.setFragmentData=a=>{var{selection:r}=e;if(r){var[o,i]=n.e6.edges(r),s=n.ML.void(e,{at:o.path}),d=n.ML.void(e,{at:i.path});if(!n.e6.isCollapsed(r)||s){var l=_.toDOMRange(e,r),c=l.cloneContents(),f=c.childNodes[0];if(c.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(f=e)}),d){var[u]=d,h=l.cloneRange(),g=_.toDOMNode(e,u);h.setEndAfter(g),c=h.cloneContents()}if(s&&(f=c.querySelector("[data-slate-spacer]")),Array.from(c.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),isDOMText(f)){var p=f.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(f),c.appendChild(p),f=p}var v=JSON.stringify(e.getFragment()),m=window.btoa(encodeURIComponent(v));f.setAttribute("data-slate-fragment",m),a.setData("application/".concat(t),m);var w=c.ownerDocument.createElement("div");return w.appendChild(c),w.setAttribute("hidden","true"),c.ownerDocument.body.appendChild(w),a.setData("text/html",w.innerHTML),a.setData("text/plain",getPlainText(w)),c.ownerDocument.body.removeChild(w),a}}},e.insertData=t=>{e.insertFragmentData(t)||e.insertTextData(t)},e.insertFragmentData=a=>{var r=a.getData("application/".concat(t))||getSlateFragmentAttribute(a);if(r){var n=JSON.parse(decodeURIComponent(window.atob(r)));return e.insertFragment(n),!0}return!1},e.insertTextData=t=>{var a=t.getData("text/plain");if(a){var r=a.split(/\r\n|\r|\n/),o=!1;for(var i of r)o&&n.YR.splitNodes(e,{always:!0}),e.insertText(i),o=!0;return!0}return!1},e.onChange=t=>{(d<18?i.unstable_batchedUpdates:e=>e())(()=>{var a=S.get(e);a&&a(),r(t)})},e},getMatches=(e,t)=>{var a=[];for(var[r,o]of n.ML.levels(e,{at:t})){var i=_.findKey(e,r);a.push([o,i])}return a}}}]);