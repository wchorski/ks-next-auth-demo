(()=>{var e={};e.id=931,e.ids=[931],e.modules={21841:e=>{"use strict";e.exports=require("@aws-sdk/client-s3")},53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},22057:e=>{"use strict";e.exports=require("constants")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},84492:e=>{"use strict";e.exports=require("node:stream")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},87870:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>d,routeModule:()=>h,tree:()=>l});var t=s(73137),n=s(54647),i=s(4183),o=s.n(i),a=s(71775),u={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(u[e]=()=>a[e]);s.d(r,u);let c=t.AppPageRouteModule,l=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,58194)),"/Volumes/edata/vscode/ks-next-auth/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,59197)),"/Volumes/edata/vscode/ks-next-auth/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"]}],d=["/Volumes/edata/vscode/ks-next-auth/src/app/page.tsx"],x="/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new c({definition:{kind:n.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},94925:(e,r,s)=>{Promise.resolve().then(s.bind(s,19990)),Promise.resolve().then(s.bind(s,91647)),Promise.resolve().then(s.bind(s,43954))},43954:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>LoginForm});var t=s(60080),n=s(11440),i=s.n(n);function LoginForm(){return t.jsx("section",{className:"login",children:(0,t.jsxs)("div",{children:[t.jsx("h2",{children:"Login"}),t.jsx(i(),{href:"/api/auth/signin",children:" Login"}),t.jsx("h3",{children:"Sign in to your account"})]})})}},58194:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>HomePage});var t=s(48144);s(53830);var n=s(24259),i=s(5569),o=s(53524);let a=globalThis.keystoneContext||(0,n.f)(i.default,o);var u=s(94375);let c={block:{heading({level:e,children:r,textAlign:s}){let n=`h${e}`;return t.jsx(n,{style:{textAlign:s,textTransform:"uppercase"},children:r})}}};function DocumentRender({document:e}){return t.jsx(u.e,{document:e,renderers:c})}var l=s(3471),d=s(56337),x=s(17536);let p=(0,x.createProxy)(String.raw`/Volumes/edata/vscode/ks-next-auth/src/components/LoginForm.tsx`),{__esModule:h,$$typeof:m}=p,g=p.default;async function HomePage(e){console.log(e);let r=await (0,l.getServerSession)(d.N);console.log("==== app page SESSION ===="),console.log({session:r});let s=await a.withSession(r).query.User.findMany({query:"id name email "}),n=await a.withSession(r).query.Post.findMany({query:`
      id
      title
      content { document } 
      author {
        name
      }
    `});return console.log({posts:n}),(0,t.jsxs)("section",{children:[r?(0,t.jsxs)(t.Fragment,{children:[t.jsx("h3",{children:" Authenticated user"}),(0,t.jsxs)("p",{children:[" User: ",r.user?.name," "]}),(0,t.jsxs)("p",{children:[" email: ",r.user?.email," "]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{children:["Signed in as ",r.user&&r.user.name]}),t.jsx("a",{target:"_blank",href:"http://localhost:3001/",children:" backend UI "}),t.jsx("br",{}),t.jsx("a",{href:"/api/auth/signout",children:"Sign out"})]})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("p",{children:" login user "}),t.jsx(g,{})]}),t.jsx("h1",{children:"Keystone \uD83E\uDD1D Next.js"}),t.jsx("ul",{children:t.jsx("li",{children:"Below you can see the names of users in the database."})}),(0,t.jsxs)("div",{children:[t.jsx("p",{children:t.jsx("strong",{children:"Users fetched from the server"})}),t.jsx("ol",{children:s.map(e=>(0,t.jsxs)("li",{children:[(0,t.jsxs)("span",{children:[e.name," "]}),(0,t.jsxs)("span",{children:[e.email," "]})]},e.id))})]}),t.jsx("h2",{children:"Posts"}),n.length<=0&&t.jsx("p",{children:"no posssts "}),t.jsx("ul",{children:n?.map(e=>t.jsxs("li",{children:[e?.title," | by: ",e.author?.name,t.jsx(DocumentRender,{document:e.content?.document})]},e.id))})]})}}};var r=require("../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[650,536,854,45,957,569,908,933,751],()=>__webpack_exec__(87870));module.exports=s})();